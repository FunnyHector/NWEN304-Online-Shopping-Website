<html>
    <% include components/head.ejs %>
    <body>
        <% include components/menu_and_heading.ejs %>

        <div class="container content">
            <% if (locals.error) { %>

                <div class="alert alert-danger">
                    <%= error %>, please refresh or contact our <a href="mailto:hectorcaesar@hotmail.com">customer service</a>.
                </div>

            <% } else {%>

                <h1>Search Results</h1>

                <% if (locals.results.albums.length > 0) { %>
                    <div class="album-panel">
                        <h3>We have found these vinyls:</h3>
                        <% for (let album of results.albums) { %>
                            <a href="/item/<%= album.id %>">
                                <div class="item">
                                    <img src="/image/medium/<%= album.id %>" width="175" alt="album cover image" />
                                    <div class="item-caption">
                                        <span class="item-title item-label"><%= album.title %></span>
                                        <span class="artist item-label"><%= album.artist_id %></span>
                                        <span class="price item-label">$<%= album.price %></span>
                                    </div>
                                </div>
                            </a>
                        <% } %>
                    </div>
                <% } %>

                <% if (locals.results.artists.length > 0) { %>
                    <div class="artist-panel">
                        <h3>We have found these artists:</h3>
                        <% for (let artist of results.artists) { %>
                            <a href="/artist/<%= artist.id %>">
                                <div class="item">
                                    <img src="/image/artists/medium/<%= artist.id %>" width="175" alt="artist image" />
                                    <div class="item-caption">
                                        <span class="item-title item-label"><%= artist.artist_name %></span>
                                    </div>
                                </div>
                            </a>
                        <% } %>
                    </div>
                <% } %>

                <% if (locals.results.songs.length > 0) { %>
                    <div class="song-panel">
                        <h3>Songs</h3>
                        <ul>
                            <% for (let song of results.songs) { %>
                            <li>
                                Song Title: <%= song.title %>,
                                Track No: <%= song.track_no %>,
                                Album id: <%= song.album_id %>,
                                Artist id: <%= song.artist_id %>
                            </li>
                            <% } %>
                        </ul>
                    </div>
                <% } %>

                <% if (locals.results.albums.length + locals.results.artists.length + locals.results.songs.length <= 0) { %>
                    <h3>Nothing found</h3>
                <% } %>

            <% } %>

        </div>
    </body>
</html>
